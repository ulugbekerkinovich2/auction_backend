generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgres://postgres:998359015a@@185.217.131.98:5432/auction_db"
}

model User {
  id       String    @id @default(uuid())
  username String    @unique
  password String
  role     Role
  products Product[]
  bids     Bid[]
}

model Product {
  id         String            @id @default(uuid())
  userId     String
  user       User              @relation(fields: [userId], references: [id])
  name       String
  desc       String // Description of the product
  cost       Int
  image      String
  bids       Bid[]
  categories ProductCategory[]
}

model Category {
  id       String            @id @default(uuid())
  name     String
  products ProductCategory[]
}

model ProductCategory {
  productId  String
  categoryId String
  product    Product  @relation(fields: [productId], references: [id])
  category   Category @relation(fields: [categoryId], references: [id])

  @@id([productId, categoryId])
}

model Bid {
  id        String  @id @default(uuid())
  productId String
  product   Product @relation(fields: [productId], references: [id])
  userId    String
  user      User    @relation(fields: [userId], references: [id])
  bidAmount Int
}

enum Role {
  ADMIN
  USER
  MODERATOR
}
